#!/usr/bin/env python
#*******************************************************************************
#*   Ledger Blue
#*   (c) 2016 Ledger
#*
#*  Licensed under the Apache License, Version 2.0 (the "License");
#*  you may not use this file except in compliance with the License.
#*  You may obtain a copy of the License at
#*
#*      http://www.apache.org/licenses/LICENSE-2.0
#*
#*  Unless required by applicable law or agreed to in writing, software
#*  distributed under the License is distributed on an "AS IS" BASIS,
#*  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#*  See the License for the specific language governing permissions and
#*  limitations under the License.
#********************************************************************************

from helpers.ledgerInterface import signTransaction

unsignedTx              = "02000000015eb7c05f0000000000000000212fa22112a1608eca34e50d864ae088e4a1b4057e81f675e215ec266737935e0200000000a3e111000000005601000074ff679a4ec3c0fbb86f09ef4c026311d61de49fa902e41dd02b0c52b282374300000000212fa22112a1608eca34e50d864ae088e4a1b4057e81f675e215ec266737935e00e1f50500000000020000005a42435f46355955594458445f5746444a534156355f4b3359373252434d5f474c5150333258495f514456584f4747445f4a3743475353534b5f35564b5237594d4cffbed81db2f2164b00b917248817f654d5f795952fa8f1266951ff8ff170378c9d05000013ffc98996f567da13fd0a99ca88f8b287041f94f6721dcadcb31cce68ef509687f55b686f173c9e75f13a1333431bc0d20a5163817b4d7e4b9e19f3523c440b0000000000000000000000000000000000000000000000004400000000000000ee812d08ee258b3905941ce8d0ef440ff946211e3c60eb0fcbde66b07386497cf6d1221ace9942b969b5b0b951f1c9404f69a5fb0e3b0ececec996801e03c9000200000000000000" # hash: d4a711bbafaf65b9c9440b7a94080bdfc86b15aab4e04e850645c4c2166509b9  # signature: 0498245e07221bdfc40b72266647f368bc3b42eea0ba6b7b6693b935c784df2fc4b4397bb532807e781e293c164b901906f1f8aaf5bdfd30522111f6bb589b00
derivationPathIndex = '00000000'
inputData = derivationPathIndex + unsignedTx
signTransaction(inputData)

#** 
# Register Node data format
# ========================
# Example: 80030000960000000000000002000000015eb7c05f0000000000000000212fa22112a1608eca34e50d864ae088e4a1b4057e81f675e215ec266737935e0200000000a3e111000000005601000074ff679a4ec3c0fbb86f09ef4c026311d61de49fa902e41dd02b0c52b282374300000000212fa22112a1608eca34e50d864ae088e4a1b4057e81f675e215ec266737935e00e1f50500000000020000005a42435f46355955594458445f5746444a534156355f4b3359373252434d5f474c5150333258495f514456584f4747445f4a3743475353534b5f35564b5237594d4cffbed81db2f2164b00b917248817f654d5f795952fa8f1266951ff8ff170378c9d05000013ffc98996f567da13fd0a99ca88f8b287041f94f6721dcadcb31cce68ef509687f55b686f173c9e75f13a1333431bc0d20a5163817b4d7e4b9e19f3523c440b0000000000000000000000000000000000000000000000004400000000000000ee812d08ee258b3905941ce8d0ef440ff946211e3c60eb0fcbde66b07386497cf6d1221ace9942b969b5b0b951f1c9404f69a5fb0e3b0ececec996801e03c9000200000000000000
# ========================
# 80                : CLA (1)
# 03                : INS (sign) (1) [sign transaction instruction type]
# 00                : P1 (1)
# 00                : P1 (1)
# 96000000          : Data Length (4)
# ========================
# 00000000          : derivation path index of the account used (4)
# 02000000          : transaction type (4)
# 01                : version (1)
# 5eb7c05f00000000  : timestamp (8)
# 00000000          : account type of sender address (4)
# 212fa22112a1608eca34e50d864ae088e4a1b4057e81f675e215ec266737935e : sender public key
# 02000000          : account type of recipient address (4) (empty addres)
# 00a3e11100000000  : fee (8)
# 56010000          : length of body byte (4)
# 74ff679a4ec3c0fbb86f09ef4c026311d61de49fa902e41dd02b0c52b2823743  : public key (32)
# 00000000          : account type of sender address (4)
# 212fa22112a1608eca34e50d864ae088e4a1b4057e81f675e215ec266737935e : recipient public key
# 00e1f505          : locked funds
# proofOfOwnership
# 00000000020000005a42435f46355955594458445f5746444a534156355f4b3359373252434d5f474c5150333258495f514456584f4747445f4a3743475353534b5f35564b5237594d4cffbed81db2f2164b00b917248817f654d5f795952fa8f1266951ff8ff170378c9d05000013ffc98996f567da13fd0a99ca88f8b287041f94f6721dcadcb31cce68ef509687f55b686f173c9e75f13a1333431bc0d20a5163817b4d7e4b9e19f3523c440b0000000000000000000000000000000000000000000000004400000000000000ee812d08ee258b3905941ce8d0ef440ff946211e3c60eb0fcbde66b07386497cf6d1221ace9942b969b5b0b951f1c9404f69a5fb0e3b0ececec996801e03c9000200000000000000
# *#